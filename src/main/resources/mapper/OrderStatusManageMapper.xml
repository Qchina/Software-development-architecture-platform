<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mypetstore.persistence.OrderStatusManageMapper">

    <!-- 定义 orderstatus 表的 resultMap -->
    <resultMap id="orderStatusMap" type="com.example.mypetstore.domain.OrderStatus">
        <id property="orderId" column="orderid"/>
        <id property="lineNum" column="linenum"/>
        <result property="timestamp" column="timestamp"/>
        <result property="status" column="status"/>
    </resultMap>

    <!-- 查询所有 orderstatus -->
    <select id="getOrderStatusList" resultMap="orderStatusMap">
        SELECT * FROM mypetstore.orderstatus
    </select>

    <!-- 根据订单ID查询 orderstatus -->
    <select id="getOrderStatusByOrderId" resultMap="orderStatusMap" parameterType="java.lang.Integer">
        SELECT * FROM mypetstore.orderstatus WHERE orderid = #{orderId}
    </select>

    <!-- 添加 orderstatus -->
    <insert id="addOrderStatus" parameterType="com.example.mypetstore.domain.OrderStatus">
        INSERT INTO mypetstore.orderstatus (orderid, linenum, timestamp, status)
        VALUES (#{orderId}, #{lineNum}, #{timestamp}, #{status})
    </insert>

    <!-- 更新 orderstatus -->
    <update id="updateOrderStatus">
        UPDATE mypetstore.orderstatus
        SET
            status = #{status}
        WHERE orderid = #{orderId}
    </update>

    <!-- 删除 orderstatus -->
    <delete id="deleteOrderStatus" parameterType="java.lang.Integer">
        DELETE FROM mypetstore.orderstatus WHERE orderid = #{orderId} AND linenum = #{lineNum}
    </delete>

    <!-- 根据状态查询 orderstatus -->
    <select id="searchOrderStatusByStatus" resultMap="orderStatusMap" parameterType="java.lang.String">
        SELECT * FROM mypetstore.orderstatus WHERE status = #{status}
    </select>
</mapper>